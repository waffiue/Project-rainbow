<!DOCTYPE html> 
<html lang="ru"> 
<head> 
  <meta charset="utf-8"> 
  <title>Администрирование</title> 
  <link rel="stylesheet" href="admin.css"> 
  <link rel="preconnect" href="https://fonts.googleapis.com"> 
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> 
  <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300;400;500;600;700&display=swap" rel="stylesheet"> 
 </head> 
<body> 
  <header class="admin"> 
    <h1>Администрирование</h1></header>
 
<nav> 
    <a href="index.html" class="menu-page">Главная</a> 
    <a href="menu.html" class="menu-page">Меню</a> 
    <a href="admin.html" class="menu-page">Администрирование</a> 
</nav> 

<hr class="line">

<main>

    <h2 class="title">Изменение меню</h2>
    
    <form class="form">
        <label class="label" for="category">Выберете категорию блюда:</label>
          <select id="category">
          <option value="Завтрак">Завтрак</option>
          <option value="Холодные закуски">Холодные закуски</option>
          <option value="Первые блюда">Первые блюда</option>
          <option value="Вторые блюда">Вторые блюда</option>
          <option value="Напитки">Напитки</option>
        </select>
            
        
        <label class="label" for="dish">Выберете название блюда:</label>
        
        <select id="dishName" class="category">
          
          <optgroup label="Завтрак">
            <option value="Яичница">Яичница</option>
            <option value="Овсянка">Овсянка</option>
            <option value="Творожная запеканка">Творожная запеканка</option>
            <option value="Омлет">Омлет</option>
            <option value="Сырники">Сырники</option>
          </optgroup>
          
          <optgroup label="Холодные закуски">
            <option value="Оливье">Оливье</option>
            <option value="Винегрет">Винегрет</option>
            <option value="Цезарь">Цезарь</option>
            <option value="Мимоза">Мимоза</option>
          </optgroup>
          
          <optgroup label="Первые блюда">
            <option value="Борщ">Борщ</option>
            <option value="Щи">Щи</option>
            <option value="Уха">Уха</option>
          </optgroup>
          
          <optgroup label="Вторые блюда">
            <option value="Котлеты по-киевски">Котлеты по-киевски</option>
            <option value="Плов">Плов</option>
            <option value="Голубцы">Голубцы</option>
            <option value="Жаркое из говядины">Жаркое из говядины</option>
            <option value="Гуляш">Гуляш</option>
          </optgroup>
         
          <optgroup label="Напитки">
            <option value="Чай">Чай</option>
            <option value="Кофе">Кофе</option>
            <option value="Сок">Сок</option>
            <option value="Морс">Морс</option>
            <option value="Компот">Компот</option>
          </optgroup>
        
        </select>

        <label class="label" for="dishPrice">Установите необходимую цену:</label>
        <input type="text" id="dishPrice">
        <br>
        
        <button class="btn" type="button" onclick="addDish()">Добавить</button> 
        
        <button class="btn" type="button" onclick="removeDish()">Удалить</button>
        
        <button class="btn" type="button" onclick="clearMenu()">Очистить меню</button>
      
    </form>

    <script>
      
        // Массив с готовыми вариантами описаний для каждого блюда. 
      var dishDescriptions = { "Яичница": "блюдо из яиц, подаётся с хлебом и помидорами.", 

      "Овсянка": "питательное блюдо, приготовленное из овсяных хлопьев, подаётся с орехами и мёдом.", 

      "Творожная запеканка": "блюдо, приготовленное из творога и яиц, подаётся с вареньем или мёдом.", 

      "Омлет": "блюдо из яиц, подаётся со свежими овощами.", 

      "Сырники": "блюдо, приготовленное из творога и яиц, подаётся со сметаной, мёдом или вареньем.", 

      "Оливье": "салат с вареной картошкой, морковью, горошком, огурцами, маринованными огурцами, яйцами и майонезом.",

      "Винегрет": "салат с вареной свеклой, морковью, картошкой, маринованными огурцами, луком и растительным маслом.", 

      "Цезарь": "салат с кусочками запеченного куриного мяса, листьями салата, сухариками, тертым пармезаном и соусом цезарь.", 

      "Мимоза": "салат с вареными яйцами, картофелем, морковью, луком, консервированным горошком и майонезом.", 

      "Борщ": "суп из  свеклы, капусты, моркови, лука, картофеля, говядины и специй.", 

      "Щи": "традиционный суп, готовящийся на основе кислого сока из квашеной капусты, с добавлением овощей и мяса.", 

      "Уха": "рыбный суп, приготовленный на основе различных видов пресноводной или морской рыбы, с добавлением картофеля, лука, моркови и зелени.", 

      "Котлеты по-киевски": "куриные котлеты, с начинкой из масла, зелени и сыра, обжаренные во фритюре, с гарниром.", 

      "Плов": "традиционное блюдо узбекской кухни, приготовленное из риса, мяса, моркови и специй.", 

      "Голубцы": "рулетики из капусты, начиненные фаршем из мяса или грибов.", 

      "Жаркое из говядины": "тушеное мясное блюдо с луком, морковью, картофелем, грибами и томатным соусом.", 

      "Гуляш": "блюдо с говяжьим мясом, луком, морковью, картофелем, перцем, томатной пастой и специями.", 

      "Чай": "черный, зеленый, фруктовый, травяной.",

      "Кофе": "эспрессо, капуччино", 

      "Сок": "апельсиновый, яблочный, мультифруктовый.", 

      "Морс": "клюквенный, брусничный, смородиновый.", 

      "Компот": "яблочный, вишневый, черничный." };

      //Ф-я для добавления блюда в меню
      function addDish() {
      var category = document.getElementById('category').value;
      var dishName = document.getElementById('dishName').value;
      var dishDescription = dishDescriptions[dishName]; 
      var dishPrice = document.getElementById('dishPrice').value;

      // Генерируем имя файла изображения на основе выбранного блюда
      var dishImage = dishName.toLowerCase().replace(/ /g, '_') + '.png';

      // dish содержит информацию о блюде
      var dish = { name: dishName, description: dishDescription, price: dishPrice, image: dishImage };

      // Проверка, есть ли уже категория в localStorage
      if (localStorage.getItem(category)) {
        var dishes = JSON.parse(localStorage.getItem(category));

        // Проверка, есть ли уже блюдо в категории
        var existingDishIndex = dishes.findIndex(function(d) {
          return d.name === dishName;
        });

        // Если блюдо существует, обновляем его, иначе добавляем новое
        if (existingDishIndex !== -1) {
          dishes[existingDishIndex] = dish;
        } else {
          dishes.push(dish);
        }

        // Сохраняем обновленный массив блюд обратно в localStorage
        localStorage.setItem(category, JSON.stringify(dishes));
      } else {
        // Если категории нет, создаем новый массив с блюдом и сохраняем его в localStorage
        localStorage.setItem(category, JSON.stringify([dish]));
      }
    }

     //Ф-я для удаления блюда из меню.
     function removeDish() {
        var category = document.getElementById('category').value;
        var dishName = document.getElementById('dishName').value;

        if (localStorage.getItem(category)) {
            var dishes = JSON.parse(localStorage.getItem(category));
            var index = dishes.findIndex((dish) => dish.name === dishName);

            //Проверка, есть ли категория в LocalStorage. Да => получаем массив блюд для этой категории, находим индекс удаляемого блюда по имени и удаляем его из массива, далее сохраняем обновленный массив обратно в LocalStorage.
            if (index > -1) {
                dishes.splice(index, 1);
                localStorage.setItem(category, JSON.stringify(dishes));
            }
        }
      }

     //Ф-я очистки меню.
     function clearMenu() {
            localStorage.clear();
        }

    </script>

</main>

<footer>
    <h2>Контакты</h2> 
    <p class="contacts">Наш телефон: 8-888-888-88-88</p> 
    <p class="address">Улица Васильева, 15, Снежинск, Челябинская область</p> 
</footer>
</body>
</html>